<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WiFi –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            color: #333;
            margin-bottom: 30px;
            text-align: center;
            font-size: 28px;
        }
        
        .info-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
        }
        
        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .info-row:last-child {
            border-bottom: none;
        }
        
        .label {
            font-weight: 600;
            color: #555;
        }
        
        .value {
            color: #667eea;
            font-weight: 500;
        }
        
        .status {
            display: inline-block;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }
        
        .status.online {
            background: #d4edda;
            color: #155724;
        }
        
        .status.offline {
            background: #f8d7da;
            color: #721c24;
        }
        
        button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .speed-meter {
            margin-top: 20px;
            text-align: center;
        }
        
        .speed-value {
            font-size: 48px;
            font-weight: 700;
            color: #667eea;
        }
        
        .speed-unit {
            font-size: 18px;
            color: #888;
        }
        
        .warning {
            background: #fff3cd;
            border-left-color: #ffc107;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üõú WiFi –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</h1>
        
        <div class="info-card">
            <div class="info-row">
                <span class="label">–°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:</span>
                <span class="status online" id="connectionStatus">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span>
            </div>
            <div class="info-row">
                <span class="label">–¢–∏–ø —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:</span>
                <span class="value" id="connectionType">-</span>
            </div>
            <div class="info-row">
                <span class="label">–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Ç–∏–ø:</span>
                <span class="value" id="effectiveType">-</span>
            </div>
            <div class="info-row">
                <span class="label">–°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏:</span>
                <span class="value" id="downlink">-</span>
            </div>
            <div class="info-row">
                <span class="label">RTT (–∑–∞–¥–µ—Ä–∂–∫–∞):</span>
                <span class="value" id="rtt">-</span>
            </div>
            <div class="info-row">
                <span class="label">–≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞:</span>
                <span class="value" id="saveData">-</span>
            </div>
        </div>
        
        <div class="speed-meter">
            <div class="speed-value" id="speedValue">-</div>
            <div class="speed-unit">Mbps</div>
        </div>
        
        <button onclick="runSpeedTest()">üöÄ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å</button>
        
        <div class="warning" id="warning" style="display: none;"></div>
    </div>

    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Network Information API
        const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
        
        function updateNetworkInfo() {
            // –°—Ç–∞—Ç—É—Å –æ–Ω–ª–∞–π–Ω/–æ—Ñ–ª–∞–π–Ω
            const statusEl = document.getElementById('connectionStatus');
            if (navigator.onLine) {
                statusEl.textContent = '–û–Ω–ª–∞–π–Ω';
                statusEl.className = 'status online';
            } else {
                statusEl.textContent = '–û—Ñ–ª–∞–π–Ω';
                statusEl.className = 'status offline';
            }
            
            if (connection) {
                // –¢–∏–ø —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
                document.getElementById('connectionType').textContent = connection.type || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
                
                // –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Ç–∏–ø (4g, 3g, 2g, slow-2g)
                document.getElementById('effectiveType').textContent = connection.effectiveType || '-';
                
                // –°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ (Mbps)
                if (connection.downlink) {
                    document.getElementById('downlink').textContent = connection.downlink + ' Mbps';
                    document.getElementById('speedValue').textContent = connection.downlink;
                }
                
                // RTT (Round Trip Time) - –∑–∞–¥–µ—Ä–∂–∫–∞ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
                document.getElementById('rtt').textContent = connection.rtt ? connection.rtt + ' –º—Å' : '-';
                
                // –†–µ–∂–∏–º —ç–∫–æ–Ω–æ–º–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞
                document.getElementById('saveData').textContent = connection.saveData ? '–í–∫–ª—é—á–µ–Ω–∞' : '–í—ã–∫–ª—é—á–µ–Ω–∞';
                
                // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
                showWarnings();
            } else {
                document.getElementById('warning').style.display = 'block';
                document.getElementById('warning').textContent = '‚ö†Ô∏è Network Information API –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤–∞—à–∏–º –±—Ä–∞—É–∑–µ—Ä–æ–º. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ Chrome/Edge.';
            }
        }
        
        function showWarnings() {
            const warningEl = document.getElementById('warning');
            let warnings = [];
            
            if (connection.effectiveType === 'slow-2g' || connection.effectiveType === '2g') {
                warnings.push('‚ö†Ô∏è –û—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ');
            }
            
            if (connection.rtt > 500) {
                warnings.push('‚ö†Ô∏è –í—ã—Å–æ–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (RTT > 500ms)');
            }
            
            if (connection.downlink < 1) {
                warnings.push('‚ö†Ô∏è –ù–∏–∑–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏');
            }
            
            if (warnings.length > 0) {
                warningEl.style.display = 'block';
                warningEl.innerHTML = warnings.join('<br>');
            } else {
                warningEl.style.display = 'none';
            }
        }
        
        // –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏
        async function runSpeedTest() {
            const button = event.target;
            button.textContent = '‚è≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ...';
            button.disabled = true;
            
            try {
                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª (–∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å GitHub)
                const fileUrl = 'https://raw.githubusercontent.com/github/explore/main/topics/javascript/javascript.png';
                const fileSizeInBytes = 50000; // –ø—Ä–∏–º–µ—Ä–Ω—ã–π —Ä–∞–∑–º–µ—Ä
                
                const startTime = new Date().getTime();
                const response = await fetch(fileUrl + '?cacheBust=' + startTime);
                await response.blob();
                const endTime = new Date().getTime();
                
                const duration = (endTime - startTime) / 1000; // –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
                const speedMbps = ((fileSizeInBytes * 8) / (duration * 1024 * 1024)).toFixed(2);
                
                document.getElementById('speedValue').textContent = speedMbps;
                
            } catch (error) {
                alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏: ' + error.message);
            } finally {
                button.textContent = 'üöÄ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å';
                button.disabled = false;
            }
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        updateNetworkInfo();
        
        // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
        if (connection) {
            connection.addEventListener('change', updateNetworkInfo);
        }
        
        window.addEventListener('online', updateNetworkInfo);
        window.addEventListener('offline', updateNetworkInfo);
        
        // –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
        setInterval(updateNetworkInfo, 5000);
    </script>
</body>
  </html>
